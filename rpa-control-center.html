<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RPA Control Center - Live Intelligence & Orchestration</title>
<!-- COBE Globe -->
<script src="https://unpkg.com/cobe@0.6.3/dist/cobe.umd.js"></script>
<!-- GSAP -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
<!-- Mermaid Flowchart -->
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <link rel="stylesheet" href="./assets/dunsonator.css" />
      <link rel="stylesheet" href="./assets/glass-dark.css" />
<style>
:root {
  --color-primary: #00A0FB;
  --color-glow: rgba(0,160,251,0.15);
  --color-glow-strong: rgba(0,160,251,0.4);
  --color-teal: #32B8C6;
  --color-success: #00C853;
  --color-warning: #FF9800;
  --color-danger: #FF4444;
  --color-bg: #0A0E27;
  --color-bg-card: #141B3A;
  --color-bg-elevated: #1A2348;
  --color-text: #FFFFFF;
  --color-text-muted: #B0B8CC;
  --color-border: rgba(255,255,255,0.1);
  --color-cyber-green: #00ff41;
  --color-cyber-pink: #ff00ff;
  --color-cyber-orange: #ff6600;
}
* { margin:0; padding:0; box-sizing:border-box; }
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: var(--color-bg);
  color: var(--color-text);
  min-height: 100vh;
  overflow-x: hidden;
}

/* PARTICLE BACKGROUND */
#particle-canvas {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  z-index: 0;
  pointer-events: none;
}

/* HEADER */
.rpa-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 32px;
  background: linear-gradient(180deg, rgba(20,27,58,0.98) 0%, rgba(10,14,39,0.95) 100%);
  border-bottom: 1px solid var(--color-border);
  position: sticky; top: 0; z-index: 100;
  backdrop-filter: blur(20px);
}
.rpa-title {
  font-size: 1.4rem; font-weight: 700;
  color: var(--color-primary);
  text-shadow: 0 0 20px var(--color-glow-strong);
  display: flex; align-items: center; gap: 12px;
}
.rpa-title .bot-icon {
  width: 40px; height: 40px;
  animation: pulse-glow 2s infinite;
}
@keyframes pulse-glow {
  0%,100% { filter: drop-shadow(0 0 8px var(--color-primary)); }
  50% { filter: drop-shadow(0 0 20px var(--color-cyber-green)); }
}
.header-nav { display: flex; gap: 12px; align-items: center; }
.btn {
  padding: 10px 20px; border-radius: 8px; border: none;
  cursor: pointer; font-weight: 600; font-size: 0.85rem;
  transition: all 0.3s ease;
}
.btn-primary { background: var(--color-primary); color: white; }
.btn-primary:hover { box-shadow: 0 0 25px var(--color-glow-strong); transform: translateY(-2px); }
.btn-outline { background: transparent; border: 1px solid var(--color-border); color: var(--color-text); }
.btn-outline:hover { border-color: var(--color-primary); }
.btn-danger { background: var(--color-danger); color: white; }
.btn-success { background: var(--color-success); color: white; }

/* MAIN GRID */
.main-grid {
  display: grid;
  grid-template-columns: 300px 1fr 360px;
  min-height: calc(100vh - 70px);
  position: relative; z-index: 1;
}

/* LEFT SIDEBAR */
.sidebar-left {
  background: var(--color-bg-card);
  border-right: 1px solid var(--color-border);
  padding: 20px;
  overflow-y: auto;
}
.section-title {
  font-size: 0.7rem; text-transform: uppercase;
  letter-spacing: 1.5px; color: var(--color-text-muted);
  margin-bottom: 12px; padding-bottom: 8px;
  border-bottom: 1px solid var(--color-border);
}

/* PLATFORM CARDS */
.platform-card {
  background: var(--color-bg-elevated);
  border: 1px solid var(--color-border);
  border-radius: 10px; padding: 14px;
  margin-bottom: 10px; cursor: pointer;
  transition: all 0.3s ease;
}
.platform-card:hover {
  border-color: var(--color-primary);
  box-shadow: 0 0 20px var(--color-glow);
  transform: translateX(4px);
}
.platform-card.active {
  border-color: var(--color-success);
  box-shadow: 0 0 15px rgba(0,200,83,0.3);
}
.platform-header {
  display: flex; justify-content: space-between;
  align-items: center; margin-bottom: 8px;
}
.platform-name { font-weight: 600; font-size: 0.9rem; }
.platform-status {
  width: 10px; height: 10px; border-radius: 50%;
}
.status-active { background: var(--color-success); box-shadow: 0 0 10px var(--color-success); }
.status-idle { background: var(--color-warning); }
.status-offline { background: #666; }
.platform-metrics {
  display: flex; gap: 12px; font-size: 0.75rem;
  color: var(--color-text-muted);
}
.metric-badge {
  background: rgba(0,160,251,0.15);
  padding: 2px 8px; border-radius: 4px;
}

/* AGENT DEPLOYMENT PANELS */
.agent-panel {
  background: var(--color-bg-elevated);
  border: 1px solid var(--color-border);
  border-radius: 10px; padding: 14px;
  margin-bottom: 10px;
}
.agent-header {
  display: flex; justify-content: space-between;
  align-items: center; margin-bottom: 10px;
}
.agent-name { font-weight: 600; color: var(--color-teal); }
.agent-trigger {
  font-size: 0.65rem; background: rgba(50,184,198,0.2);
  padding: 2px 6px; border-radius: 4px;
}
.execution-step {
  display: flex; align-items: center; gap: 8px;
  font-size: 0.8rem; padding: 6px 0;
  border-bottom: 1px solid rgba(255,255,255,0.05);
}
.step-num {
  width: 20px; height: 20px; border-radius: 50%;
  background: var(--color-primary); display: flex;
  align-items: center; justify-content: center;
  font-size: 0.7rem; font-weight: 700;
}
.step-time { margin-left: auto; color: var(--color-text-muted); font-size: 0.7rem; }
.deploy-btn {
  width: 100%; margin-top: 10px; padding: 8px;
  background: linear-gradient(135deg, var(--color-primary), var(--color-teal));
  border: none; border-radius: 6px; color: white;
  font-weight: 600; cursor: pointer;
  transition: all 0.3s ease;
}
.deploy-btn:hover { transform: scale(1.02); box-shadow: 0 0 20px var(--color-glow-strong); }

/* CENTER CONTENT */
.center-content {
  padding: 24px;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

/* GLOBE CONTAINER */
.globe-section {
  background: var(--color-bg-card);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  padding: 20px;
  position: relative;
  overflow: hidden;
}
.globe-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}
.globe-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--color-primary);
}
.globe-stats {
  display: flex;
  gap: 20px;
}
.globe-stat {
  text-align: center;
}
.stat-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--color-cyber-green);
}
.stat-label {
  font-size: 0.7rem;
  color: var(--color-text-muted);
  text-transform: uppercase;
}
.globe-wrapper {
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}
#globe-canvas {
  width: 400px !important;
  height: 400px !important;
}
.flight-overlay {
  position: absolute;
  top: 10px;
  right: 10px;
  background: rgba(0,0,0,0.7);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  padding: 12px;
  font-size: 0.75rem;
}
.flight-item {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 6px;
}
.flight-icon {
  color: var(--color-cyber-orange);
}
.flight-callsign {
  color: var(--color-cyber-green);
  font-family: monospace;
}

/* FLOWCHART SECTION */
.flowchart-section {
  background: var(--color-bg-card);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  padding: 20px;
}
.flowchart-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--color-teal);
  margin-bottom: 16px;
}
.mermaid {
  background: transparent !important;
}
.mermaid svg {
  max-width: 100%;
}
.node rect, .node circle, .node ellipse, .node polygon {
  fill: var(--color-bg-elevated) !important;
  stroke: var(--color-primary) !important;
}
.edgePath .path {
  stroke: var(--color-teal) !important;
}
.flowchart-hint {
  font-size: 0.75rem;
  color: var(--color-text-muted);
  margin-top: 12px;
  text-align: center;
}

/* TERMINAL */
.terminal-section {
  background: #0d1117;
  border: 1px solid var(--color-border);
  border-radius: 12px;
  overflow: hidden;
}
.terminal-header {
  background: #161b22;
  padding: 10px 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid var(--color-border);
}
.terminal-dots {
  display: flex;
  gap: 6px;
}
.terminal-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
}
.dot-red { background: #ff5f56; }
.dot-yellow { background: #ffbd2e; }
.dot-green { background: #27c93f; }
.terminal-output {
  padding: 16px;
  font-family: 'Monaco', 'Menlo', monospace;
  font-size: 0.8rem;
  line-height: 1.6;
  max-height: 200px;
  overflow-y: auto;
  color: #c9d1d9;
}
.terminal-output .prompt { color: var(--color-success); }
.terminal-output .command { color: #79c0ff; }
.terminal-output .output { color: #8b949e; }
.terminal-input {
  background: #0d1117;
  border: none;
  border-top: 1px solid var(--color-border);
  padding: 12px 16px;
  width: 100%;
  font-family: 'Monaco', 'Menlo', monospace;
  font-size: 0.8rem;
  color: #c9d1d9;
}
.terminal-input:focus { outline: none; }

/* RIGHT SIDEBAR */
.sidebar-right {
  background: var(--color-bg-card);
  border-left: 1px solid var(--color-border);
  padding: 20px;
  overflow-y: auto;
}

/* AI BOT SECTION */
.ai-bot-section {
  background: linear-gradient(135deg, rgba(0,160,251,0.1), rgba(255,0,255,0.1));
  border: 1px solid var(--color-primary);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
  text-align: center;
}
.ai-bot-visual {
  width: 120px;
  height: 120px;
  margin: 0 auto 16px;
  position: relative;
}
.bot-core {
  width: 80px;
  height: 80px;
  background: linear-gradient(135deg, var(--color-primary), var(--color-cyber-pink));
  border-radius: 20px;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
  animation: bot-pulse 2s infinite;
  box-shadow: 0 0 40px var(--color-glow-strong);
}
@keyframes bot-pulse {
  0%, 100% { transform: translate(-50%, -50%) scale(1); }
  50% { transform: translate(-50%, -50%) scale(1.05); }
}
.bot-arm {
  position: absolute;
  width: 40px;
  height: 8px;
  background: linear-gradient(90deg, var(--color-cyber-orange), var(--color-danger));
  border-radius: 4px;
  top: 50%;
  right: -5px;
  transform: translateY(-50%);
  animation: arm-recoil 0.5s infinite;
}
@keyframes arm-recoil {
  0%, 100% { transform: translateY(-50%) translateX(0); }
  50% { transform: translateY(-50%) translateX(-3px); }
}
.bot-particles {
  position: absolute;
  right: -20px;
  top: 50%;
  transform: translateY(-50%);
}
.particle {
  width: 4px;
  height: 4px;
  background: var(--color-cyber-orange);
  border-radius: 50%;
  position: absolute;
  animation: particle-fly 0.3s infinite;
}
.particle:nth-child(1) { animation-delay: 0s; }
.particle:nth-child(2) { animation-delay: 0.1s; top: -5px; }
.particle:nth-child(3) { animation-delay: 0.2s; top: 5px; }
@keyframes particle-fly {
  0% { opacity: 1; transform: translateX(0); }
  100% { opacity: 0; transform: translateX(30px); }
}
.ai-bot-title {
  font-size: 1rem;
  font-weight: 600;
  margin-bottom: 8px;
}
.ai-bot-status {
  font-size: 0.75rem;
  color: var(--color-cyber-green);
}

/* ASK ANYTHING SECTION */
.ask-section {
  background: var(--color-bg-elevated);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 20px;
}
.ask-title {
  font-size: 0.9rem;
  font-weight: 600;
  margin-bottom: 12px;
  color: var(--color-primary);
}
.ask-input {
  width: 100%;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  padding: 12px;
  color: var(--color-text);
  font-size: 0.85rem;
  resize: none;
  min-height: 80px;
}
.ask-input:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 15px var(--color-glow);
}
.ask-btn {
  width: 100%;
  margin-top: 10px;
  padding: 12px;
  background: linear-gradient(135deg, var(--color-cyber-green), var(--color-teal));
  border: none;
  border-radius: 8px;
  color: var(--color-bg);
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s ease;
}
.ask-btn:hover {
  transform: scale(1.02);
  box-shadow: 0 0 25px rgba(0,255,65,0.4);
}

/* ACTIVITY FEED */
.activity-feed {
  background: var(--color-bg-elevated);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 16px;
  max-height: 300px;
  overflow-y: auto;
}
.feed-title {
  font-size: 0.9rem;
  font-weight: 600;
  margin-bottom: 12px;
  color: var(--color-teal);
}
.feed-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 10px 0;
  border-bottom: 1px solid rgba(255,255,255,0.05);
  font-size: 0.8rem;
}
.feed-icon {
  width: 24px;
  height: 24px;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.7rem;
  flex-shrink: 0;
}
.feed-icon.github { background: #238636; }
.feed-icon.linear { background: #5E6AD2; }
.feed-icon.tally { background: #00A67E; }
.feed-icon.deploy { background: var(--color-primary); }
.feed-time {
  font-size: 0.7rem;
  color: var(--color-text-muted);
  margin-top: 4px;
}

/* METRICS GRID */
.metrics-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  margin-bottom: 20px;
}
.metric-card {
  background: var(--color-bg-elevated);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  padding: 14px;
  text-align: center;
}
.metric-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--color-primary);
}
.metric-value.success { color: var(--color-success); }
.metric-label {
  font-size: 0.65rem;
  color: var(--color-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}
</style>
</head>
<body>
<!-- Particle Canvas -->
<canvas id="particle-canvas"></canvas>

<!-- Header -->
<header class="rpa-header">
  <div class="rpa-title">
    <svg class="bot-icon" viewBox="0 0 100 100">
      <rect x="25" y="20" width="50" height="60" rx="10" fill="#00A0FB"/>
      <circle cx="38" cy="40" r="6" fill="#00ff41"/>
      <circle cx="62" cy="40" r="6" fill="#00ff41"/>
      <rect x="35" y="55" width="30" height="8" rx="4" fill="#141B3A"/>
      <rect x="70" y="45" width="25" height="6" rx="3" fill="#ff6600"/>
      <circle cx="98" cy="48" r="3" fill="#ff4444"/>
    </svg>
    <span>RPA Control Center</span>
  </div>
  <div class="header-nav">
    <a href="hub.html" class="btn btn-outline">Hub</a>
    <a href="command-center.html" class="btn btn-outline">Command Center</a>
    <a href="intelligence/index.html" class="btn btn-primary">Intelligence</a>
  </div>
</header>

<!-- Main Grid -->
<div class="main-grid">
  <!-- LEFT SIDEBAR -->
  <aside class="sidebar-left">
    <div class="section-title">Platform Status</div>
    
    <div class="platform-card active">
      <div class="platform-header">
        <span class="platform-name">GitHub</span>
        <div class="platform-status status-active"></div>
      </div>
      <div class="platform-metrics">
        <span class="metric-badge">67 deploys</span>
        <span>CI/CD Ready</span>
      </div>
    </div>
    
    <div class="platform-card active">
      <div class="platform-header">
        <span class="platform-name">Linear</span>
        <div class="platform-status status-active"></div>
      </div>
      <div class="platform-metrics">
        <span class="metric-badge">12 tasks</span>
        <span>Synced</span>
      </div>
    </div>
    
    <div class="platform-card">
      <div class="platform-header">
        <span class="platform-name">Tally</span>
        <div class="platform-status status-idle"></div>
      </div>
      <div class="platform-metrics">
        <span class="metric-badge">Webhook</span>
        <span>Awaiting</span>
      </div>
    </div>
    
    <div class="platform-card">
      <div class="platform-header">
        <span class="platform-name">CodePen</span>
        <div class="platform-status status-active"></div>
      </div>
      <div class="platform-metrics">
        <span class="metric-badge">5 pens</span>
        <span>Synced</span>
      </div>
    </div>
    
    <div class="section-title" style="margin-top:24px;">Agent Deployment</div>
    
    <div class="agent-panel">
      <div class="agent-header">
        <span class="agent-name">Website Enhancer</span>
        <span class="agent-trigger">on push</span>
      </div>
      <div class="execution-step">
        <span class="step-num">1</span>
        <span>Analyze page structure</span>
        <span class="step-time">~2s</span>
      </div>
      <div class="execution-step">
        <span class="step-num">2</span>
        <span>Generate improvements</span>
        <span class="step-time">~5s</span>
      </div>
      <div class="execution-step">
        <span class="step-num">3</span>
        <span>Deploy changes</span>
        <span class="step-time">~3s</span>
      </div>
      <button class="deploy-btn" onclick="deployAgent('enhancer')">Deploy Now</button>
    </div>
    
    <div class="agent-panel">
      <div class="agent-header">
        <span class="agent-name">Data Pipeline</span>
        <span class="agent-trigger">scheduled</span>
      </div>
      <div class="execution-step">
        <span class="step-num">1</span>
        <span>Fetch 6sense data</span>
        <span class="step-time">~4s</span>
      </div>
      <div class="execution-step">
        <span class="step-num">2</span>
        <span>Process signals</span>
        <span class="step-time">~6s</span>
      </div>
      <div class="execution-step">
        <span class="step-num">3</span>
        <span>Update dashboard</span>
        <span class="step-time">~2s</span>
      </div>
      <button class="deploy-btn" onclick="deployAgent('pipeline')">Run Pipeline</button>
    </div>
    
    <div class="agent-panel">
      <div class="agent-header">
        <span class="agent-name">Deep Signal Analyst</span>
        <span class="agent-trigger">on demand</span>
      </div>
      <div class="execution-step">
        <span class="step-num">1</span>
        <span>Research account</span>
        <span class="step-time">~60m</span>
      </div>
      <div class="execution-step">
        <span class="step-num">2</span>
        <span>Build hypotheses</span>
        <span class="step-time">~15m</span>
      </div>
      <div class="execution-step">
        <span class="step-num">3</span>
        <span>Generate dossier</span>
        <span class="step-time">~10m</span>
      </div>
      <button class="deploy-btn" onclick="deployAgent('analyst')">Start Research</button>
    </div>
  </aside>

  <!-- CENTER CONTENT -->
  <main class="center-content">
    <!-- GLOBE WITH FLIGHT TRACKING -->
    <section class="globe-section">
      <div class="globe-header">
        <h2 class="globe-title">Global Operations Monitor</h2>
        <div class="globe-stats">
          <div class="globe-stat">
            <div class="stat-value" id="activeFlights">47</div>
            <div class="stat-label">Active Tracks</div>
          </div>
          <div class="globe-stat">
            <div class="stat-value" id="globalNodes">8</div>
            <div class="stat-label">Nodes</div>
          </div>
        </div>
      </div>
      <div class="globe-wrapper">
        <canvas id="globe-canvas"></canvas>
        <div class="flight-overlay">
          <div style="font-weight:600;margin-bottom:8px;color:var(--color-cyber-orange);">Live Military Tracks</div>
          <div class="flight-item">
            <span class="flight-icon">‚úà</span>
            <span class="flight-callsign">FORTE12</span>
            <span>RQ-4 | 55k ft</span>
          </div>
          <div class="flight-item">
            <span class="flight-icon">‚úà</span>
            <span class="flight-callsign">LAGR223</span>
            <span>KC-135 | 28k ft</span>
          </div>
          <div class="flight-item">
            <span class="flight-icon">‚úà</span>
            <span class="flight-callsign">HOMER51</span>
            <span>P-8 | 32k ft</span>
          </div>
          <div class="flight-item">
            <span class="flight-icon">‚úà</span>
            <span class="flight-callsign">DUKE01</span>
            <span>E-6B | 35k ft</span>
          </div>
        </div>
      </div>
    </section>

    <!-- INTERACTIVE FLOWCHART -->
    <section class="flowchart-section">
      <h2 class="flowchart-title">System Workflow - Click Any Node to Execute</h2>
      <div class="mermaid" id="workflow-chart">
flowchart LR
    A[Tally Form] -->|webhook| B[Webhook Relay]
    B -->|trigger| C[GitHub Actions]
    C -->|create| D[Linear Issue]
    C -->|update| E[Globe Data]
    D -->|notify| F[Cursor IDE]
    F -->|deploy| G[GitHub Pages]
    G -->|live| H[Dashboard]
    
    click A callback "Receive form submission"
    click B callback "Process webhook payload"
    click C callback "Trigger CI/CD pipeline"
    click D callback "Create task in Linear"
    click E callback "Update globe markers"
    click F callback "Open in Cursor IDE"
    click G callback "Deploy to Pages"
    click H callback "View live dashboard"
      </div>
      <p class="flowchart-hint">Click any node above to trigger that action in real-time</p>
    </section>

    <!-- TERMINAL SIMULATION -->
    <section class="terminal-section">
      <div class="terminal-header">
        <div class="terminal-dots">
          <div class="terminal-dot dot-red"></div>
          <div class="terminal-dot dot-yellow"></div>
          <div class="terminal-dot dot-green"></div>
        </div>
        <span style="color:var(--color-text-muted);font-size:0.85rem;">RPA Terminal Bridge</span>
      </div>
      <div class="terminal-output" id="terminalOutput">
        <div><span class="prompt">~/rpa-control $</span> <span class="command">rpa status</span></div>
        <div class="output">RPA Engine v2.1.0 | Status: ACTIVE</div>
        <div class="output">Agents online: 4 | Queue: 0 | Processed: 1,247</div>
        <div><span class="prompt">~/rpa-control $</span> <span class="command">rpa agents --list</span></div>
        <div class="output">[1] Deep Signal Analyst    | READY  | Last: 2m ago</div>
        <div class="output">[2] Buying Committee       | IDLE   | Last: 15m ago</div>
        <div class="output">[3] Messaging Generator    | READY  | Last: 5m ago</div>
        <div class="output">[4] Website Enhancer       | ACTIVE | Running...</div>
        <div><span class="prompt">~/rpa-control $</span> <span class="command">_</span></div>
      </div>
      <input type="text" class="terminal-input" id="terminalInput" placeholder="Enter command... (try: rpa help, rpa deploy, rpa status)" onkeypress="handleTerminal(event)">
    </section>
  </main>

  <!-- RIGHT SIDEBAR -->
  <aside class="sidebar-right">
    <!-- AI BOT VISUAL -->
    <div class="ai-bot-section">
      <div class="ai-bot-visual">
        <div class="bot-core">ü§ñ</div>
        <div class="bot-arm"></div>
        <div class="bot-particles">
          <div class="particle"></div>
          <div class="particle"></div>
          <div class="particle"></div>
        </div>
      </div>
      <div class="ai-bot-title">Agentic AI Executor</div>
      <div class="ai-bot-status">‚óè ARMED & READY</div>
    </div>

    <!-- ASK ANYTHING -->
    <div class="ask-section">
      <div class="ask-title">Ask Anything / Execute Task</div>
      <textarea class="ask-input" id="askInput" placeholder="Research Morgan Stanley...
Build buying committee for JPMorgan...
Generate messaging for Wells Fargo...
Deploy latest changes..."></textarea>
      <button class="ask-btn" onclick="executeTask()">Execute Task</button>
    </div>

    <!-- METRICS -->
    <div class="metrics-grid">
      <div class="metric-card">
        <div class="metric-value">47</div>
        <div class="metric-label">Tasks/Hour</div>
      </div>
      <div class="metric-card">
        <div class="metric-value success">99.2%</div>
        <div class="metric-label">Accuracy</div>
      </div>
      <div class="metric-card">
        <div class="metric-value">156</div>
        <div class="metric-label">Sources</div>
      </div>
      <div class="metric-card">
        <div class="metric-value">L3</div>
        <div class="metric-label">Confidence</div>
      </div>
    </div>

    <!-- ACTIVITY FEED -->
    <div class="activity-feed">
      <div class="feed-title">Live Activity Feed</div>
      <div id="activityFeed">
        <div class="feed-item">
          <div class="feed-icon deploy">üöÄ</div>
          <div>
            <div>Deployed to GitHub Pages</div>
            <div class="feed-time">Just now</div>
          </div>
        </div>
        <div class="feed-item">
          <div class="feed-icon github">GH</div>
          <div>
            <div>Commit: Enhanced RPA Control Center</div>
            <div class="feed-time">2 min ago</div>
          </div>
        </div>
        <div class="feed-item">
          <div class="feed-icon linear">LN</div>
          <div>
            <div>Task created: Build globe visualization</div>
            <div class="feed-time">5 min ago</div>
          </div>
        </div>
        <div class="feed-item">
          <div class="feed-icon tally">TY</div>
          <div>
            <div>Form submission: New lead captured</div>
            <div class="feed-time">12 min ago</div>
          </div>
        </div>
        <div class="feed-item">
          <div class="feed-icon deploy">ü§ñ</div>
          <div>
            <div>Agent completed: Signal analysis for Meta</div>
            <div class="feed-time">18 min ago</div>
          </div>
        </div>
      </div>
    </div>
  </aside>
</div>

<script>
// Initialize Mermaid
mermaid.initialize({
  startOnLoad: true,
  theme: 'dark',
  securityLevel: 'loose',
  flowchart: {
    useMaxWidth: true,
    htmlLabels: true,
    curve: 'basis'
  }
});

// Mermaid click callback
window.callback = function(nodeId) {
  const actions = {
    'A': () => addFeedItem('tally', 'Tally Form triggered - processing submission'),
    'B': () => addFeedItem('deploy', 'Webhook relay received payload'),
    'C': () => addFeedItem('github', 'GitHub Actions workflow started'),
    'D': () => addFeedItem('linear', 'Linear issue created automatically'),
    'E': () => addFeedItem('deploy', 'Globe data updated with new marker'),
    'F': () => addFeedItem('deploy', 'Cursor IDE notified - opening project'),
    'G': () => addFeedItem('github', 'Deploying to GitHub Pages...'),
    'H': () => window.location.href = 'hub.html'
  };
  if (actions[nodeId]) {
    actions[nodeId]();
    terminalLog(`Executed workflow node: ${nodeId}`);
  }
};

// PARTICLE BACKGROUND SYSTEM
const particleCanvas = document.getElementById('particle-canvas');
const pCtx = particleCanvas.getContext('2d');
let particles = [];

function resizeParticleCanvas() {
  particleCanvas.width = window.innerWidth;
  particleCanvas.height = window.innerHeight;
}
resizeParticleCanvas();
window.addEventListener('resize', resizeParticleCanvas);

class Particle {
  constructor() {
    this.reset();
  }
  reset() {
    this.x = Math.random() * particleCanvas.width;
    this.y = Math.random() * particleCanvas.height;
    this.vx = (Math.random() - 0.5) * 0.5;
    this.vy = (Math.random() - 0.5) * 0.5;
    this.radius = Math.random() * 2 + 1;
    this.alpha = Math.random() * 0.5 + 0.2;
  }
  update() {
    this.x += this.vx;
    this.y += this.vy;
    if (this.x < 0 || this.x > particleCanvas.width) this.vx *= -1;
    if (this.y < 0 || this.y > particleCanvas.height) this.vy *= -1;
  }
  draw() {
    pCtx.beginPath();
    pCtx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
    pCtx.fillStyle = `rgba(0, 160, 251, ${this.alpha})`;
    pCtx.fill();
  }
}

for (let i = 0; i < 80; i++) {
  particles.push(new Particle());
}

function drawConnections() {
  for (let i = 0; i < particles.length; i++) {
    for (let j = i + 1; j < particles.length; j++) {
      const dx = particles[i].x - particles[j].x;
      const dy = particles[i].y - particles[j].y;
      const dist = Math.sqrt(dx * dx + dy * dy);
      if (dist < 150) {
        pCtx.beginPath();
        pCtx.moveTo(particles[i].x, particles[i].y);
        pCtx.lineTo(particles[j].x, particles[j].y);
        pCtx.strokeStyle = `rgba(0, 160, 251, ${0.1 * (1 - dist / 150)})`;
        pCtx.stroke();
      }
    }
  }
}

function animateParticles() {
  pCtx.clearRect(0, 0, particleCanvas.width, particleCanvas.height);
  particles.forEach(p => {
    p.update();
    p.draw();
  });
  drawConnections();
  requestAnimationFrame(animateParticles);
}
animateParticles();

// COBE GLOBE INITIALIZATION
let globe;
const globeCanvas = document.getElementById('globe-canvas');

const locations = [
  { name: 'Liberty Hill', lat: 30.6643, lng: -97.9235 },
  { name: 'San Francisco', lat: 37.7749, lng: -122.4194 },
  { name: 'New York', lat: 40.7128, lng: -74.0060 },
  { name: 'London', lat: 51.5074, lng: -0.1278 },
  { name: 'Tokyo', lat: 35.6762, lng: 139.6503 },
  { name: 'Paris', lat: 48.8566, lng: 2.3522 },
  { name: 'Sydney', lat: -33.8688, lng: 151.2093 },
  { name: 'Singapore', lat: 1.3521, lng: 103.8198 }
];

const markers = locations.map(loc => ({
  location: [loc.lat * Math.PI / 180, loc.lng * Math.PI / 180],
  size: 0.08
}));

let phi = 0;
if (typeof createGlobe !== 'undefined') {
  globe = createGlobe(globeCanvas, {
    devicePixelRatio: 2,
    width: 400 * 2,
    height: 400 * 2,
    phi: 0,
    theta: 0.3,
    dark: 1,
    diffuse: 1.2,
    mapSamples: 16000,
    mapBrightness: 6,
    baseColor: [0.05, 0.1, 0.2],
    markerColor: [0, 0.63, 0.98],
    glowColor: [0, 0.63, 0.98],
    markers: markers,
    onRender: (state) => {
      state.phi = phi;
      phi += 0.003;
    }
  });
}

// TERMINAL COMMANDS
function handleTerminal(e) {
  if (e.key === 'Enter') {
    const input = document.getElementById('terminalInput');
    const cmd = input.value.trim();
    if (cmd) {
      terminalLog(cmd, true);
      processCommand(cmd);
      input.value = '';
    }
  }
}

function terminalLog(text, isCommand = false) {
  const output = document.getElementById('terminalOutput');
  if (isCommand) {
    output.innerHTML += `<div><span class="prompt">~/rpa-control $</span> <span class="command">${text}</span></div>`;
  } else {
    output.innerHTML += `<div class="output">${text}</div>`;
  }
  output.scrollTop = output.scrollHeight;
}

function processCommand(cmd) {
  const commands = {
    'rpa help': () => {
      terminalLog('Available commands:');
      terminalLog('  rpa status     - Show system status');
      terminalLog('  rpa agents     - List active agents');
      terminalLog('  rpa deploy     - Deploy all changes');
      terminalLog('  rpa research   - Start deep research');
      terminalLog('  clear          - Clear terminal');
    },
    'rpa status': () => {
      terminalLog('RPA Engine v2.1.0 | Status: ACTIVE');
      terminalLog(`Uptime: ${Math.floor(Math.random() * 24)}h ${Math.floor(Math.random() * 60)}m`);
      terminalLog('Queue: 0 | Processed today: ' + Math.floor(Math.random() * 500 + 1000));
    },
    'rpa agents': () => {
      terminalLog('[1] Deep Signal Analyst    | READY');
      terminalLog('[2] Buying Committee       | READY');
      terminalLog('[3] Messaging Generator    | READY');
      terminalLog('[4] Website Enhancer       | ACTIVE');
    },
    'rpa deploy': () => {
      terminalLog('Initiating deployment sequence...');
      setTimeout(() => terminalLog('Building assets...'), 500);
      setTimeout(() => terminalLog('Pushing to GitHub...'), 1000);
      setTimeout(() => { terminalLog('Deployed successfully!'); addFeedItem('deploy', 'Deployment completed via terminal'); }, 1500);
    },
    'rpa research': () => {
      terminalLog('Starting Deep Signal Analyst...');
      terminalLog('Target: Enter company name in Ask Anything panel');
      addFeedItem('deploy', 'Research agent initialized');
    },
    'clear': () => {
      document.getElementById('terminalOutput').innerHTML = '';
    }
  };

  const handler = commands[cmd.toLowerCase()];
  if (handler) {
    handler();
  } else if (cmd.startsWith('rpa research ')) {
    const target = cmd.replace('rpa research ', '');
    terminalLog(`Initiating research on: ${target}`);
    terminalLog('Phase 1: SEC filings, news, executive moves...');
    addFeedItem('deploy', `Research started for ${target}`);
  } else {
    terminalLog(`Command not found: ${cmd}. Try 'rpa help'`);
  }
}

// ACTIVITY FEED
function addFeedItem(type, message) {
  const feed = document.getElementById('activityFeed');
  const icons = { github: 'GH', linear: 'LN', tally: 'TY', deploy: 'üöÄ' };
  const newItem = document.createElement('div');
  newItem.className = 'feed-item';
  newItem.innerHTML = `
    <div class="feed-icon ${type}">${icons[type] || 'üì°'}</div>
    <div>
      <div>${message}</div>
      <div class="feed-time">Just now</div>
    </div>
  `;
  feed.insertBefore(newItem, feed.firstChild);
}

// DEPLOY AGENT
function deployAgent(agentId) {
  const agents = {
    'enhancer': 'Website Enhancer',
    'pipeline': 'Data Pipeline',
    'analyst': 'Deep Signal Analyst'
  };
  terminalLog(`Deploying ${agents[agentId]}...`, true);
  setTimeout(() => {
    terminalLog(`${agents[agentId]} deployed successfully`);
    addFeedItem('deploy', `${agents[agentId]} execution completed`);
  }, 2000);
}

// EXECUTE TASK FROM ASK ANYTHING
function executeTask() {
  const input = document.getElementById('askInput');
  const task = input.value.trim();
  if (!task) return;
  
  terminalLog(`Executing task: ${task}`, true);
  addFeedItem('deploy', `Task received: ${task.substring(0, 50)}...`);
  
  if (task.toLowerCase().includes('research')) {
    terminalLog('Initializing Deep Signal Analyst...');
    setTimeout(() => terminalLog('Phase 1: Context gathering (5 min)'), 500);
    setTimeout(() => terminalLog('Phase 2: Systematic scanning (20-30 min)'), 1000);
    setTimeout(() => terminalLog('Phase 3: Validation & synthesis (10 min)'), 1500);
  } else if (task.toLowerCase().includes('committee')) {
    terminalLog('Initializing Buying Committee Builder...');
    setTimeout(() => terminalLog('Building 6-pillar framework...'), 500);
    setTimeout(() => terminalLog('Targeting 35-50 leads...'), 1000);
  } else if (task.toLowerCase().includes('messaging')) {
    terminalLog('Initializing Messaging Generator...');
    setTimeout(() => terminalLog('Generating M1/M2/M3 sequences...'), 500);
  } else if (task.toLowerCase().includes('deploy')) {
    processCommand('rpa deploy');
  } else {
    terminalLog('Processing custom task...');
    setTimeout(() => terminalLog('Task queued for execution'), 500);
  }
  
  input.value = '';
}

// GSAP Animations
if (typeof gsap !== 'undefined') {
  gsap.from('.platform-card', {
    duration: 0.5,
    y: 30,
    opacity: 0,
    stagger: 0.1,
    ease: 'power2.out'
  });
  
  gsap.from('.agent-panel', {
    duration: 0.5,
    x: -30,
    opacity: 0,
    stagger: 0.15,
    delay: 0.5,
    ease: 'power2.out'
  });
  
  gsap.from('.globe-section', {
    duration: 0.8,
    scale: 0.9,
    opacity: 0,
    delay: 0.3,
    ease: 'back.out(1.7)'
  });
}

console.log('RPA Control Center v2.0 initialized');
console.log('Globe markers:', locations.map(l => l.name).join(', '));
</script>
  <script src="./assets/dunsonator-chat.js"></script>
<script src="./assets/enhance.js"></script>
  <script src="./assets/dunsonator-images.js"></script>
</body>
</html>
